# Port Scanner

Written for CSC 251: Network Security final project.

## Necessary files

The only file required to run this port scanner is `port_scanner.py`.

## Instructions

### Installing necessary modules

- Install the `scapy` module for packet manipulation:

  ```bash
  pip install scapy
  ```

- Install the `pytz` module to view the timezone shown in the port scanner output:

  ```bash
  pip install pytz
  ```

- Other than that, the remaining modules used in this program are pre-installed in Python and thus do not need to be installed using `pip`.

### Running the port scanner

- To run the port scanner, from the terminal (MacOS/Linux) or command prompt (Windows):

  ```bash
  python3 port_scanner.py -mode [normal/syn/fin] -order [order/random] -ports [all/known] [ip_address]
  ```

- Notes about testing the port scanner:

  - The IP address of the target host to be tested on is **131.229.72.13**.
  - The target hostname is **glasgow.smith.edu**.
  - Order of options (`-mode`, `-order`, `-ports`) does not matter.
  - Doing multiple rounds of testing at once might cause the host to be down. I would suggest waiting a bit and running the port scanner again.
  - **IMPORTANT: This port scanner is only intended to scan the host specified above. It is important that the port scanner should not be misused (i.e. to scan other hosts without permission.)**

- Expected results:

  - When the scanner probes only well-known ports (i.e. ports 0 to 1023), the scan is expected to take _approximately 20 seconds_. When the scanner probes all ports (i.e. ports 0 to 65525), the scan is expected to take _approximately 20 minutes_. If there is any huge deviation from these estimations, I would suggest running the port scanner again.
  - Here is an example of what the output looks like when running the port scanner in the terminal:

  ```bash
  python3 port_scanner.py -mode syn -order order -ports known 131.229.72.13
  ```

  ```
  Starting port scan at 2023-05-06 16:27:20 EDT
  Port scan report for glasgow.smith.edu (131.229.72.13)
  Host is up (1.7713s latency).

  Port 22 (ssh) is open

  Not shown: 1023 closed port(s)
  PORT    STATE SERVICE
  22/tcp  open  ssh

  Scan done: 1 IP address (1 host up) scanned in 19.42 seconds
  ```

  - Additionally, here is an example of what the output looks like when the IP address of the target host is invalid:

  ```bash
  python3 port_scanner.py -mode syn -order random -ports known 131.229.72.1300000000
  ```

  ```
  Starting port scan at 2023-05-06 16:29:33 EDT
  Failed to resolve "131.229.72.1300000000"
  WARNING: No targets were specified, so 0 hosts scanned
  Scan done: 0 IP addresses (0 hosts up) scanned in 0.07 seconds
  ```

## Challenges & how to overcome

- One major challenge that I faced in this project is my unfamiliarity with using the `socket` module for socket programming and the `scapy` module for packet manipulation in general.
  - However, there are quite a number of online resources (especially those with diagrams to illustrate the differences between the 3 scanning modes), which I think was very helpful for me to understand more thoroughly the differences between TCP full connect scan, SYN scan and FIN scan, as well as how to implement them accordingly in order to complete this final project.
  - Reviewing my previous coding assignments that involved using the `socket` and `scapy` modules helped too.
- I used the `argparse` module before but didn't have a whole lot of experience with it, so it took me a while at the beginning of the project to figure out what I need to do to construct the correct arguments for the command line.
  - Reading the Python documentation on `argparse` helped me a lot in recalling how `argparse` works.

## Resources

- [argparse - Parser for command-line options, arguments and sub-commands - Python documentation](https://docs.python.org/3/library/argparse.html)
- [socket â€” Low-level networking interface](https://docs.python.org/3/library/socket.html)
- [How to Check if a Host is Reachable using Python - Best Methods](https://copyprogramming.com/howto/how-to-check-if-a-host-is-reachable-using-python-best-methods)
- [Let's! Ping The Network with 15 Line Of Code Using Python & Scapy!](https://dev.to/powerexploit/let-s-ping-the-network-with-python-scapy-5g18)
- [Windows Sockets Error Codes](https://learn.microsoft.com/en-us/windows/win32/winsock/windows-sockets-error-codes-2)
- [Socket Error Codes Generated by UNIX-Based Systems - CA Client Automation - 14.0 - CA Technologies Documentation](https://techdocs.broadcom.com/us/en/ca-enterprise-software/business-management/clarity-client-automation/14-0/dsm-messages/data-transport-services-messages/socket-errors/socket-error-codes-generated-by-unix-based-systems.html)
- [Port Scanner using Python](https://www.geeksforgeeks.org/port-scanner-using-python/)
- [SYN Stealth Scan with Power of Python Scapy](https://dev.to/powerexploit/syn-stealth-scan-with-power-of-python-scapy-58aj)
- [Python Penetration Testing - Port Scanning](https://www.oreilly.com/library/view/python-penetration-testing/9781789138962/9f389f41-4489-4628-a61f-969eea3aae8c.xhtml)
- [Port Scanning using Scapy](https://resources.infosecinstitute.com/topic/port-scanning-using-scapy/)
- [Add Colour to Text in Python](https://ozzmaker.com/add-colour-to-text-in-python/)

## Contributors

- [Thu Tran](https://github.com/thuntran) (I worked independently in this final project.)
